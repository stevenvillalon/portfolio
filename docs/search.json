[
  {
    "objectID": "tidytuesday.html",
    "href": "tidytuesday.html",
    "title": "Tidy Tuesday Projects",
    "section": "",
    "text": "Below are some of my Tidy Tuesday projects!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nProject Gutenberg\n\n\n\nString Manipulation\n\nMaps\n\nR\n\n\n\n\n\n\nJun 3, 2025\n\n\n\n\n\n\n\n\n\n\n\n\nDungeons and Dragons Monsters\n\n\n\nFacet grid\n\nBarplot\n\nR\n\n\n\n\n\n\nMay 31, 2025\n\n\n\n\n\n\n\n\n\n\n\n\nWater Quality at Sydney Beaches\n\n\n\nLollipop Plot\n\nR\n\n\n\n\n\n\nMay 20, 2025\n\n\n\n\n\n\n\n\n\n\n\n\nSeismic Events at Mount Vesuvius\n\n\n\nHeatmap\n\nR\n\n\n\n\n\n\nMay 13, 2025\n\n\n\n\n\n\n\n\n\n\n\n\nNSF Grant Terminations\n\n\n\nMap\n\nR\n\n\n\n\n\n\nMay 6, 2025\n\n\n\n\n\n\n\n\n\n\n\n\nUse R! Conference\n\n\n\nBarplot\n\nText Analysis\n\nLDA\n\nR\n\n\n\n\n\n\nApr 29, 2025\n\n\n\n\n\n\n\n\n\n\n\n\nFatal Car Crashes on 4/20\n\n\n\nBarplot\n\nR\n\n\n\n\n\n\nApr 22, 2025\n\n\n\n\n\n\n\n\n\n\n\n\nBase R Penguins\n\n\n\nScatterplot\n\nDecision Tree\n\nR\n\n\n\n\n\n\nApr 15, 2025\n\n\n\n\n\nNo matching items\n Back to top"
  },
  {
    "objectID": "TIDYTUESDAY/2025-06-03-GUTENBERG/2025-06-03_tidy_tuesday_gutenberg_O.html",
    "href": "TIDYTUESDAY/2025-06-03-GUTENBERG/2025-06-03_tidy_tuesday_gutenberg_O.html",
    "title": "Project Gutenberg",
    "section": "",
    "text": "Question of Interest\nHow many books in Project Gutenberg have a Latin American country as one their subjects?\nGoal: make a map with the number of books as a label.\n\n\n\n1. Packages & Dependencies\n\n\nShow Code\n# Load packages\nlibrary(tidyverse)\nlibrary(tidytuesdayR)\nlibrary(here)\n\n# Load helper functions\nsource(here::here(\"R/utils/tidy_tuesday_helpers.R\"))\n\n# Set project title\ntitle &lt;- \"Project Gutenberg\"\ntt_date &lt;- \"2025-06-03\"\n\n\n\n\n2. Load Data\n\n\nShow Code\n# Load data from tidytuesdayR package\ntuesdata &lt;- tidytuesdayR::tt_load(tt_date)\n\n# Extract elements from tuesdata\ngutenberg_authors &lt;- tuesdata$gutenberg_authors\ngutenberg_languages &lt;- tuesdata$gutenberg_languages\ngutenberg_metadata &lt;- tuesdata$gutenberg_metadata\ngutenberg_subjects &lt;- tuesdata$gutenberg_subjects\n\n# Remove tuesdata file\nrm(tuesdata)\n\n\n\n\n3. Examine Data\n\n\nShow Code\n# View data\nhead(gutenberg_authors)\n\n\n\n  \n\n\n\nShow Code\nhead(gutenberg_languages)\n\n\n\n  \n\n\n\nShow Code\nhead(gutenberg_metadata)\n\n\n\n  \n\n\n\nShow Code\nhead(gutenberg_subjects)\n\n\n\n  \n\n\n\n\n\n4. Cleaning\n\n\nShow Code\n# Collapse subjects into 1 row per id\npg_subjects &lt;- gutenberg_subjects |&gt; \n  group_by(gutenberg_id) |&gt; \n  summarize(subjects = str_flatten(subject, \" | \"))\nhead(pg_subjects)\n\n\n\n  \n\n\n\n\n\nShow Code\n# Join pg_subjects to metadata table\npg_clean &lt;- gutenberg_metadata |&gt; \n  left_join(pg_subjects, by = \"gutenberg_id\") |&gt; \n  select(c(\"gutenberg_id\", \"title\", \"language\", \"subjects\" )) |&gt; \n  na.omit()\nhead(pg_clean)\n\n\n\n  \n\n\n\n\n\nShow Code\n# List of Latin American countries\nlatam_caribbean_countries &lt;- c(\n  # South America\n  \"Argentina\", \"Bolivia\", \"Brazil\", \"Chile\", \"Colombia\",\n  \"Ecuador\", \"Guyana\", \"Paraguay\", \"Peru\", \"Suriname\", \"Uruguay\", \"Venezuela\",\n  \n  # Central America\n  \"Costa Rica\", \"El Salvador\", \"Guatemala\", \"Honduras\", \"Nicaragua\", \"Panama\",\n  \n  # Caribbean\n  \"Cuba\", \"Dominican Republic\", \"Puerto Rico\",\n  \n  # North America (Spanish-speaking)\n  \"Mexico\"\n)\n\n\n\n\nShow Code\n# Initialize an empty list to collect rows\nrows &lt;- list()\n\n# Loop over each country and compute count\nfor (country in latam_caribbean_countries) {\n  count &lt;- sum(str_detect(pg_clean$subjects, fixed(country)))\n  rows[[country]] &lt;- data.frame(\n    country = country,\n    book_count = count\n  )\n}\n\n# Combine all rows into a single data frame and sort descending\ncnts_by_country &lt;- bind_rows(rows) |&gt; \n  mutate(cnt_group = case_when(\n    book_count &lt; 50 ~ \"0 - 49\",\n    book_count &lt; 100 ~ \"50 - 99\",\n    book_count &gt;= 100 ~ \"100+\",\n    )) |&gt; \n    mutate(cnt_group = factor(cnt_group, levels = c(\"0 - 49\", \"50 - 99\", \"100+\"), ordered = TRUE)) |&gt; \n  arrange(desc(book_count))\ncnts_by_country\n\n\n\n  \n\n\n\n\n\n5. Mapping Parameters\n\n\nShow Code\nlibrary(rnaturalearth)\nlibrary(sf)\n\n\nLinking to GEOS 3.13.0, GDAL 3.8.5, PROJ 9.5.1; sf_use_s2() is TRUE\n\n\nShow Code\n# Set lat/lon parameters for plotting area\nlong_min &lt;- -125 \nlong_max &lt;- -30\nlat_min &lt;- -60\nlat_max &lt;- 35\n\n# Load country shapes\nworld &lt;- ne_countries(scale = \"medium\", returnclass = \"sf\")\n\n# Join country shapes to cnts_by_country\nworld_counts &lt;- world |&gt; \n  inner_join(cnts_by_country, by = c(\"name\" = \"country\"))\n\n# Extract lat/lon from sf object\nworld_counts &lt;- world_counts |&gt;\n  mutate(label_point = suppressWarnings(st_point_on_surface(geometry))) |&gt;\n  mutate(\n    lon = st_coordinates(label_point)[, 1],\n    lat = st_coordinates(label_point)[, 2]\n  )\n\n\n\n\n6. Visualization\n\n\nShow Code\nlibrary(ggrepel)\nlibrary(showtext)\nlibrary(ggtext)\n\n# Load Lato font\nfont_add_google(\"Lato\", \"lato\")\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\n# Make plot\nfinal_plot &lt;- \n  ggplot(world_counts) +\n  geom_sf(color = \"gray40\") +\n  coord_sf(\n    xlim = c(long_min, long_max), \n    ylim = c(lat_min, lat_max)\n    ) +\n  geom_label_repel(\n    data = world_counts |&gt; filter(book_count &gt;= 10),\n    aes(x = lon,\n        y = lat,\n        label = paste(name, \"\\n\", book_count),\n        fill = cnt_group),\n    family = \"lato\",\n    size = 3,\n    alpha = 0.9,\n    fontface = \"bold\",\n    label.size = 0.2,\n    max.overlaps = 30\n    ) +\n  scale_fill_manual(values = c(\n    \"0 - 49\" = \"white\",\n    \"50 - 99\" = \"#E6C36D\",\n    \"100+\" = \"#A8C7A1\"\n)) +\n  labs(\n    title = \"How many books in the Gutenberg online \\nlibrary are about Latin America?\",\n    subtitle = \"Mexico was the sure bet to have the most books, but surprised to see so few for Puerto Rico, \\nColombia, and Venezuela. Books in the library are at least 95 years old and are not currently \\nunder copyright.\",\n    caption = \"Chart produced by Steven Villalon for Tidy Tuesday exercise on June 3, 2025.\",\n    fill = \"Book Counts\") +\n  theme_minimal(base_family = \"lato\") +\n  theme(\n    plot.background = element_rect(fill = \"black\", color = NA),\n    panel.background = element_rect(fill = \"black\", color = NA),\n    legend.background = element_rect(fill = \"black\", color = NA),\n    legend.key = element_rect(fill = \"black\", color = NA),\n    legend.position = \"inside\",\n    legend.position.inside = c(0.15, 0.5),\n    legend.justification = c(\"left\", \"center\"),\n    text = element_text(color = \"white\"),\n    axis.text = element_blank(),\n    axis.title = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank(),\n    plot.caption = element_text(color = \"white\", hjust = 0),\n    plot.title = element_text(color = \"#E8A6A1\", face = \"bold\", size = 20),\n    plot.subtitle = element_text(color = \"gray90\", size = 10)\n    ) + \n  guides(fill = guide_legend(override.aes = list(label = \"\"))) # Remove \"a\" from legend\nfinal_plot\n\n\n\n\n\n\n\n\n\n\n\n7. Export Files\n\n\nShow Code\n# Select file formats to export to\nformats_to_export &lt;- c(\"png\", \"svg\")\n\n# Save files to the output folder\nsave_tt_plots(\n  plot = final_plot, \n  title = title, \n  date = tt_date,\n  output_folder = \"output\", \n  formats = formats_to_export, \n  height = 8,\n  width = 6,\n  dpi = 300\n  )\n\n\n\n\n\n\n Back to top"
  }
]